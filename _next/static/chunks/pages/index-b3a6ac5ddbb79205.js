(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(1042)}])},1042:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var l=t(5893),s=t(7294);let a=()=>{let e=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]].map(e=>e.map(e=>e)),[n,t]=(0,s.useState)(e),[l,a]=(0,s.useState)([[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]),r=e=>e.toString().padStart(3,"0"),o=e=>{let n=Math.floor(e/60).toString().padStart(1,"0"),t=(e%60).toString().padStart(2,"0");return"".concat(n).concat(t)};return{userInput:n,bombMap:l,setUserInput:t,setBombMap:a,board:[[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1]],directions:[[-1,0],[-1,-1],[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1]],formatFlagCount:r,formatTime:o}},r=()=>{let{userInput:e,bombMap:n,setUserInput:t,setBombMap:l,directions:s,board:r}=a(),o=(e,n,t)=>{let l=s.map(e=>{let[l,s]=e;return[n+l,t+s]}).filter(e=>{let[n,t]=e;return i(n,t)&&-1===r[n][t]});for(let[e,n]of l)c(e,n)},i=(e,t)=>e>=0&&e<n[0].length&&t>=0&&t<n.length,c=(e,t)=>{let l=0;for(let[a,r]of s){let s=e+a,o=t+r;i(o,s)&&1===n[s][o]&&l++}r[e][t]=l,0===l&&o(l,e,t)},d=!1,_=!1,m=(t,l)=>{1===e[t][l]&&(1===n[t][l]&&(r[t][l]=11,d=!0,r.forEach((e,t)=>e.forEach((e,l)=>{1===n[t][l]&&(r[t][l]=11)}))),0===n[t][l]&&c(t,l))},x=()=>{for(let n=0;n<e.length;n++)for(let t=0;t<e[n].length;t++)m(n,t),3===e[n][t]&&(r[n][t]=10),r.some(e=>e.includes(-1))||(_=!0);return r};x();let f=0===e.flat().filter(e=>1===e).length,u=(e,t)=>{if(f){let s=[...n],a=0;for(;a<10;){let n=Math.floor(9*Math.random()),r=Math.floor(9*Math.random());n!==e&&r!==t&&1!==s[n][r]&&(s[n][r]=1,a++),l(s)}}},g=()=>{for(let n=0;n<e.length;n++)for(let t=0;t<e[n].length;t++)if(11===r[n][t]||!r.some(e=>e.includes(-1)))return},h=(l,s)=>{console.log(l,s),g();let a=[...e];a[l][s]=1,t(a),console.log("ターン変わった！"),console.log("userInput↓"),console.table(e),u(l,s),console.log("BombMap↓"),console.table(n),x(),console.log("board↓"),console.table(r)},v=(n,l,s)=>{n.preventDefault(),g();let a=[...e];0===a[l][s]?a[l][s]=3:3===a[l][s]&&(a[l][s]=0),t(a)},b=e.flat().filter(e=>1===e).length,j=e.flat().filter(e=>3===e).length;return{userInput:e,bombMap:n,gameOver:d,gameWin:_,board:r,onClick:h,onRightClick:v,clickCount:b,flagCount:j}},o=(e,n)=>{let[t,l]=(0,s.useState)(0),a=e.some(e=>e.some(e=>0!==e)),r=e.some((e,t)=>e.some((e,l)=>1===e&&1===n[t][l]));return(0,s.useEffect)(()=>{let e;return a?e=setInterval(()=>{l(e=>e+1)},1e3):clearInterval(e),r&&clearInterval(e),()=>{clearInterval(e)}},[a,r]),{timer:t}};var i=t(2729),c=t.n(i);let d=()=>{let{userInput:e,bombMap:n,board:t,gameWin:s,gameOver:i,onClick:d,onRightClick:_,clickCount:m,flagCount:x}=r(),{formatFlagCount:f,formatTime:u}=a(),{timer:g}=o(e,n);return(0,l.jsxs)("div",{className:c().container,children:[(0,l.jsxs)("div",{className:c().center,children:[(0,l.jsxs)("div",{className:c().top,children:[(0,l.jsx)("div",{className:c().left,children:f(10-x)}),!i&&!s&&(0,l.jsx)("div",{className:c().betweensmile}),i&&(0,l.jsx)("div",{className:c().betweensad}),s&&(0,l.jsx)("div",{className:c().betweenwin}),(0,l.jsx)("div",{className:c().timelog,children:(0,l.jsx)("div",{children:u(g)})})]}),(0,l.jsx)("div",{className:c().board,children:t.map((e,n)=>e.map((e,t)=>(0,l.jsxs)("div",{className:c().cell,onClick:()=>d(n,t),onContextMenu:e=>_(e,n,t),children:[-1===e&&(0,l.jsx)("div",{className:c().stone}),0===e&&(0,l.jsx)("div",{className:c().stone0,style:{}}),e>0&&e<9&&(0,l.jsx)("div",{className:c().number,style:{backgroundPosition:-30*e+30}}),10===e&&(0,l.jsx)("div",{className:c().flag}),11===e&&(0,l.jsx)("div",{className:c().bom})]},"".concat(n,"-").concat(t))))})]}),(0,l.jsxs)("div",{className:c().rilog,children:[i&&(0,l.jsx)("div",{className:c().gameover,children:(0,l.jsx)("div",{children:(0,l.jsxs)("p",{children:["ゲームオーバー",(0,l.jsx)("br",{}),"時間:",u(g),(0,l.jsx)("br",{}),"クリック数：",m," + ",x]})})}),s&&(0,l.jsx)("div",{className:c().gamewin,children:(0,l.jsx)("div",{children:(0,l.jsxs)("p",{children:["おめでとう！",(0,l.jsx)("br",{}),"時間:",u(g)," ",(0,l.jsx)("br",{}),"クリック数:",m," + ",x]})})})]})]})};var _=d},2729:function(e){e.exports={container:"index_container__gnN1f",center:"index_center__CCiNa",top:"index_top__uMqHF",left:"index_left__OQaUt",betweensmile:"index_betweensmile__8WRy6",betweensad:"index_betweensad__RuTSt",betweenwin:"index_betweenwin__TJR5s",timelog:"index_timelog___gLIh",rilog:"index_rilog__dB4d8",gameover:"index_gameover__2nrQv",gamewin:"index_gamewin__4k7yS",board:"index_board__2d6xe",cell:"index_cell__3W8ZQ",stone:"index_stone__oeDmm",number:"index_number__l0yF_",stone0:"index_stone0__GU0r7",bom:"index_bom__ERRzB",flag:"index_flag__Bsg_z",hoge:"index_hoge__UVxRa"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);